"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3070],{3070:(y,m,i)=>{i.r(m),i.d(m,{ShopPageModule:()=>R});var g=i(177),h=i(4341),n=i(4488),u=i(9858),d=i(467),p=i(5312),f=i(9492),e=i(4438),S=i(2431);function v(t,a){1&t&&e.nrm(0,"ion-item")}function C(t,a){if(1&t){const s=e.RV6();e.j41(0,"ion-item")(1,"ion-label")(2,"h2"),e.EFF(3),e.k0s(),e.j41(4,"p"),e.EFF(5),e.k0s()(),e.j41(6,"ion-button",5),e.bIt("click",function(){const r=e.eBV(s).$implicit,l=e.XpG();return e.Njj(l.addToCart(r))}),e.EFF(7,"Add to Cart"),e.k0s()()}if(2&t){const s=a.$implicit;e.R7$(3),e.JRh(s.name),e.R7$(2),e.SpI("$ ",s.price,"")}}const I=(0,f.UU)(p.c.supabaseURL,p.c.supabaseKey),T=[{path:"",component:(()=>{var t;class a{constructor(o){this.cartService=o,this.groceryItems=[],this.filteredItems=[],this.searchTerm="",this.searchActive=!1}ngOnInit(){var o=this;return(0,d.A)(function*(){let{data:r,error:l}=yield I.from("groceries").select("*");l?console.log("Error fetching groceries: ",l):r&&(o.groceryItems=r.map(c=>({name:c.name,price:c.price,quantity:1,total:c.price,image:c.image})))})()}addToCart(o){this.cartService.addToCart(o)}removeFromCart(o){this.cartService.removeFromCart(o)}getCartTotal(){return this.cartService.getCartTotal()}filterItems(){this.searchActive=!0,this.filteredItems=""===this.searchTerm.trim()?this.groceryItems:this.groceryItems.filter(o=>o.name.toLowerCase().includes(this.searchTerm.toLowerCase()))}onSearchBlur(){this.searchActive=!1}}return(t=a).\u0275fac=function(o){return new(o||t)(e.rXU(S.m))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-shop"]],decls:14,vars:5,consts:[[3,"translucent"],[3,"fullscreen"],[2,"padding","2%"],[4,"ngFor","ngForOf"],[3,"ngModelChange","ionChange","ngModel"],["shape","rounded",3,"click"]],template:function(o,r){1&o&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Groceries"),e.k0s()()(),e.j41(4,"ion-content",1)(5,"ion-card",2)(6,"ion-list")(7,"ion-item")(8,"h1"),e.EFF(9,"Shop"),e.k0s()(),e.DNE(10,v,1,0,"ion-item",3),e.j41(11,"ion-searchbar",4),e.mxI("ngModelChange",function(c){return e.DH7(r.searchTerm,c)||(r.searchTerm=c),c}),e.bIt("ionChange",function(){return r.filterItems()}),e.k0s(),e.DNE(12,C,8,2,"ion-item",3),e.k0s()(),e.nrm(13,"ion-card"),e.k0s()),2&o&&(e.Y8G("translucent",!0),e.R7$(4),e.Y8G("fullscreen",!0),e.R7$(6),e.Y8G("ngForOf",r.filteredItems),e.R7$(),e.R50("ngModel",r.searchTerm),e.R7$(),e.Y8G("ngForOf",r.searchActive?r.filteredItems:r.groceryItems))},dependencies:[g.Sq,h.BC,h.vS,n.Jm,n.b_,n.W9,n.eU,n.uz,n.he,n.nf,n.S1,n.BC,n.ai,n.Gw]}),a})()}];let M=(()=>{var t;class a{}return(t=a).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[u.iI.forChild(T),u.iI]}),a})(),R=(()=>{var t;class a{}return(t=a).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[g.MD,h.YN,n.bv,M]}),a})()}}]);