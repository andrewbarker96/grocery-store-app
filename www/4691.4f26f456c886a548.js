"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4691],{4691:(G,g,n)=>{n.r(g),n.d(g,{ShopPageModule:()=>j});var u=n(177),h=n(4341),i=n(4488),p=n(9858),f=n(467),d=n(5312),S=n(9492),m=n(334),e=n(4438),v=n(6868),C=n(4517);function P(t,a){1&t&&e.nrm(0,"ion-item")}function I(t,a){if(1&t){const s=e.RV6();e.j41(0,"ion-item")(1,"ion-label")(2,"h2"),e.EFF(3),e.k0s(),e.j41(4,"p"),e.EFF(5),e.k0s()(),e.j41(6,"ion-button",5),e.bIt("click",function(){const r=e.eBV(s).$implicit,l=e.XpG();return e.Njj(l.addToCart(r))}),e.EFF(7,"Add to Cart"),e.k0s()()}if(2&t){const s=a.$implicit;e.R7$(3),e.JRh(s.name),e.R7$(2),e.SpI("$ ",s.price,"")}}const y=(0,S.UU)(d.c.supabaseUrl,d.c.supabaseKey),M=[{path:"",component:(()=>{var t;class a{constructor(o,r){this.cartService=o,this.platform=r,this.groceryItems=[],this.filteredItems=[],this.searchTerm="",this.searchActive=!1}ngOnInit(){var o=this;return(0,f.A)(function*(){let{data:r,error:l}=yield y.from("groceries").select("*");l?console.log("Error fetching groceries: ",l):r&&(o.groceryItems=r.map(c=>({name:c.name,price:c.price,quantity:1,total:c.price,image:c.image}))),o.platform.is("capacitor")&&(m.s3.show(),m.s3.setAccessoryBarVisible({isVisible:!0}))})()}addToCart(o){this.cartService.addToCart(o),m.s3.hide()}removeFromCart(o){this.cartService.removeFromCart(o)}getCartTotal(){return this.cartService.getCartTotal()}filterItems(){this.searchActive=!0,this.filteredItems=""===this.searchTerm.trim()?this.groceryItems:this.groceryItems.filter(o=>o.name.toLowerCase().includes(this.searchTerm.toLowerCase()))}onSearchBlur(){this.searchActive=!1}}return(t=a).\u0275fac=function(o){return new(o||t)(e.rXU(v.m),e.rXU(C.OD))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-shop"]],decls:10,vars:5,consts:[[3,"translucent"],[3,"fullscreen"],[2,"padding","2%"],[4,"ngFor","ngForOf"],[3,"ngModelChange","ionChange","ngModel"],["shape","rounded",3,"click"]],template:function(o,r){1&o&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Shop"),e.k0s()()(),e.j41(4,"ion-content",1)(5,"ion-card",2)(6,"ion-list"),e.DNE(7,P,1,0,"ion-item",3),e.j41(8,"ion-searchbar",4),e.mxI("ngModelChange",function(c){return e.DH7(r.searchTerm,c)||(r.searchTerm=c),c}),e.bIt("ionChange",function(){return r.filterItems()}),e.k0s(),e.DNE(9,I,8,2,"ion-item",3),e.k0s()()()),2&o&&(e.Y8G("translucent",!0),e.R7$(4),e.Y8G("fullscreen",!0),e.R7$(3),e.Y8G("ngForOf",r.filteredItems),e.R7$(),e.R50("ngModel",r.searchTerm),e.R7$(),e.Y8G("ngForOf",r.searchActive?r.filteredItems:r.groceryItems))},dependencies:[u.Sq,h.BC,h.vS,i.Jm,i.b_,i.W9,i.eU,i.uz,i.he,i.nf,i.S1,i.BC,i.ai,i.Gw]}),a})()}];let R=(()=>{var t;class a{}return(t=a).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[p.iI.forChild(M),p.iI]}),a})(),j=(()=>{var t;class a{}return(t=a).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[u.MD,h.YN,i.bv,R]}),a})()}}]);